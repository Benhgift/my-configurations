#!/bin/zsh
# ---------------------------------------------------------------
export PATH=".bundle/binstubs:$PATH"

# Ruby Environment Commands
alias be="bundle exec"
alias rb="rbenv"
alias rbl="rbenv install -l"
alias rbi="bundle install"

# Rails Commands
alias r='rails'
alias rg='rails g'
alias rs='bundle exec ./bin/rails s'
alias rt='bundle exec ./bin/rspec'
alias rc='bundle exec ./bin/rails c'
alias rd='rails dbconsole'

# rubygems
alias gemo='gem outdated'

# rake
alias rr='bundle exec rake routes'
alias rake="noglob bundle exec rake"
alias rdbm='bundle exec rake db:migrate'
alias rdbr='bundle exec rake db:rollback'

function rbuild() {
  bundle install --path=.bundle --binstubs=.bundle/binstubs
}

# Rails Generators
function rgc() { rails g controller "$*"; }
function rgm() { rails g model "$*"; }
function rna() { rails new . --skip-bundle -T --database=postgresql }
function rnamd() { rails new . -O --skip-bundle -T }

# Rails Helpers
function rtail() {
  if [ "$*" != "" ]; then
    tail -f "log/$*.log";
  else
    tail -f log/development.log;
  fi
}

# ---------------------------------------------------------------

rubyhelp () {
  echo
  echo "  r           = rails"
  echo "  rb          = rbenv"
  echo "  rbl         = rbenv install -l"
  echo "  rbi         = bundle install"
  echo "  be          = bundle exec"
  echo "  rake        = noglob bundle exec rake"
  echo "  rg          = rails generate"
  echo "  rs          = rails server"
  echo "  rc          = rails console"
  echo "  rt          = rspec tests"
  echo "  rd          = rails db console"
  echo "  rr          = bundle exec rake routes"
  echo "  rdbm        = bundle exec rake db:migrate"
  echo "  rdbr        = bundle exec rake db:rollback"
  echo "  rgc         = rails g controller"
  echo "  rgm         = rails g model"
  echo "  rtail       = tails rails log"
  echo "  rbuild      = rbenv bundle install with binstubs"
  echo "  rna         = setup new rails application with postgres db"
  echo "  rnamd       = setup new rails application without a db"
  echo
}
